!function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){function EventEmitter(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function isFunction(arg){return"function"==typeof arg}function isNumber(arg){return"number"==typeof arg}function isObject(arg){return"object"==typeof arg&&null!==arg}function isUndefined(arg){return void 0===arg}module.exports=EventEmitter,EventEmitter.EventEmitter=EventEmitter,EventEmitter.prototype._events=void 0,EventEmitter.prototype._maxListeners=void 0,EventEmitter.defaultMaxListeners=10,EventEmitter.prototype.setMaxListeners=function(n){if(!isNumber(n)||0>n||isNaN(n))throw TypeError("n must be a positive number");return this._maxListeners=n,this},EventEmitter.prototype.emit=function(type){var er,handler,len,args,i,listeners;if(this._events||(this._events={}),"error"===type&&(!this._events.error||isObject(this._events.error)&&!this._events.error.length)){if(er=arguments[1],er instanceof Error)throw er;throw TypeError('Uncaught, unspecified "error" event.')}if(handler=this._events[type],isUndefined(handler))return!1;if(isFunction(handler))switch(arguments.length){case 1:handler.call(this);break;case 2:handler.call(this,arguments[1]);break;case 3:handler.call(this,arguments[1],arguments[2]);break;default:for(len=arguments.length,args=new Array(len-1),i=1;len>i;i++)args[i-1]=arguments[i];handler.apply(this,args)}else if(isObject(handler)){for(len=arguments.length,args=new Array(len-1),i=1;len>i;i++)args[i-1]=arguments[i];for(listeners=handler.slice(),len=listeners.length,i=0;len>i;i++)listeners[i].apply(this,args)}return!0},EventEmitter.prototype.addListener=function(type,listener){var m;if(!isFunction(listener))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",type,isFunction(listener.listener)?listener.listener:listener),this._events[type]?isObject(this._events[type])?this._events[type].push(listener):this._events[type]=[this._events[type],listener]:this._events[type]=listener,isObject(this._events[type])&&!this._events[type].warned){var m;m=isUndefined(this._maxListeners)?EventEmitter.defaultMaxListeners:this._maxListeners,m&&m>0&&this._events[type].length>m&&(this._events[type].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[type].length),"function"==typeof console.trace&&console.trace())}return this},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.once=function(type,listener){function g(){this.removeListener(type,g),fired||(fired=!0,listener.apply(this,arguments))}if(!isFunction(listener))throw TypeError("listener must be a function");var fired=!1;return g.listener=listener,this.on(type,g),this},EventEmitter.prototype.removeListener=function(type,listener){var list,position,length,i;if(!isFunction(listener))throw TypeError("listener must be a function");if(!this._events||!this._events[type])return this;if(list=this._events[type],length=list.length,position=-1,list===listener||isFunction(list.listener)&&list.listener===listener)delete this._events[type],this._events.removeListener&&this.emit("removeListener",type,listener);else if(isObject(list)){for(i=length;i-->0;)if(list[i]===listener||list[i].listener&&list[i].listener===listener){position=i;break}if(0>position)return this;1===list.length?(list.length=0,delete this._events[type]):list.splice(position,1),this._events.removeListener&&this.emit("removeListener",type,listener)}return this},EventEmitter.prototype.removeAllListeners=function(type){var key,listeners;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[type]&&delete this._events[type],this;if(0===arguments.length){for(key in this._events)"removeListener"!==key&&this.removeAllListeners(key);return this.removeAllListeners("removeListener"),this._events={},this}if(listeners=this._events[type],isFunction(listeners))this.removeListener(type,listeners);else for(;listeners.length;)this.removeListener(type,listeners[listeners.length-1]);return delete this._events[type],this},EventEmitter.prototype.listeners=function(type){var ret;return ret=this._events&&this._events[type]?isFunction(this._events[type])?[this._events[type]]:this._events[type].slice():[]},EventEmitter.listenerCount=function(emitter,type){var ret;return ret=emitter._events&&emitter._events[type]?isFunction(emitter._events[type])?1:emitter._events[type].length:0}},{}],2:[function(require,module,exports){function cleanUpNextTick(){draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue()}function drainQueue(){if(!draining){var timeout=setTimeout(cleanUpNextTick);draining=!0;for(var len=queue.length;len;){for(currentQueue=queue,queue=[];++queueIndex<len;)currentQueue[queueIndex].run();queueIndex=-1,len=queue.length}currentQueue=null,draining=!1,clearTimeout(timeout)}}function Item(fun,array){this.fun=fun,this.array=array}function noop(){}var currentQueue,process=module.exports={},queue=[],draining=!1,queueIndex=-1;process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)args[i-1]=arguments[i];queue.push(new Item(fun,args)),1!==queue.length||draining||setTimeout(drainQueue,0)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.binding=function(name){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(dir){throw new Error("process.chdir is not supported")},process.umask=function(){return 0}},{}],3:[function(require,module,exports){(function(process,global){(function(){"use strict";function lib$es6$promise$utils$$objectOrFunction(x){return"function"==typeof x||"object"==typeof x&&null!==x}function lib$es6$promise$utils$$isFunction(x){return"function"==typeof x}function lib$es6$promise$utils$$isMaybeThenable(x){return"object"==typeof x&&null!==x}function lib$es6$promise$asap$$asap(callback,arg){lib$es6$promise$asap$$queue[lib$es6$promise$asap$$len]=callback,lib$es6$promise$asap$$queue[lib$es6$promise$asap$$len+1]=arg,lib$es6$promise$asap$$len+=2,2===lib$es6$promise$asap$$len&&lib$es6$promise$asap$$scheduleFlush()}function lib$es6$promise$asap$$useNextTick(){var nextTick=process.nextTick,version=process.versions.node.match(/^(?:(\d+)\.)?(?:(\d+)\.)?(\*|\d+)$/);return Array.isArray(version)&&"0"===version[1]&&"10"===version[2]&&(nextTick=setImmediate),function(){nextTick(lib$es6$promise$asap$$flush)}}function lib$es6$promise$asap$$useVertxTimer(){return function(){lib$es6$promise$asap$$vertxNext(lib$es6$promise$asap$$flush)}}function lib$es6$promise$asap$$useMutationObserver(){var iterations=0,observer=new lib$es6$promise$asap$$BrowserMutationObserver(lib$es6$promise$asap$$flush),node=document.createTextNode("");return observer.observe(node,{characterData:!0}),function(){node.data=iterations=++iterations%2}}function lib$es6$promise$asap$$useMessageChannel(){var channel=new MessageChannel;return channel.port1.onmessage=lib$es6$promise$asap$$flush,function(){channel.port2.postMessage(0)}}function lib$es6$promise$asap$$useSetTimeout(){return function(){setTimeout(lib$es6$promise$asap$$flush,1)}}function lib$es6$promise$asap$$flush(){for(var i=0;lib$es6$promise$asap$$len>i;i+=2){var callback=lib$es6$promise$asap$$queue[i],arg=lib$es6$promise$asap$$queue[i+1];callback(arg),lib$es6$promise$asap$$queue[i]=void 0,lib$es6$promise$asap$$queue[i+1]=void 0}lib$es6$promise$asap$$len=0}function lib$es6$promise$asap$$attemptVertex(){try{var r=require,vertx=r("vertx");return lib$es6$promise$asap$$vertxNext=vertx.runOnLoop||vertx.runOnContext,lib$es6$promise$asap$$useVertxTimer()}catch(e){return lib$es6$promise$asap$$useSetTimeout()}}function lib$es6$promise$$internal$$noop(){}function lib$es6$promise$$internal$$selfFullfillment(){return new TypeError("You cannot resolve a promise with itself")}function lib$es6$promise$$internal$$cannotReturnOwn(){return new TypeError("A promises callback cannot return that same promise.")}function lib$es6$promise$$internal$$getThen(promise){try{return promise.then}catch(error){return lib$es6$promise$$internal$$GET_THEN_ERROR.error=error,lib$es6$promise$$internal$$GET_THEN_ERROR}}function lib$es6$promise$$internal$$tryThen(then,value,fulfillmentHandler,rejectionHandler){try{then.call(value,fulfillmentHandler,rejectionHandler)}catch(e){return e}}function lib$es6$promise$$internal$$handleForeignThenable(promise,thenable,then){lib$es6$promise$asap$$default(function(promise){var sealed=!1,error=lib$es6$promise$$internal$$tryThen(then,thenable,function(value){sealed||(sealed=!0,thenable!==value?lib$es6$promise$$internal$$resolve(promise,value):lib$es6$promise$$internal$$fulfill(promise,value))},function(reason){sealed||(sealed=!0,lib$es6$promise$$internal$$reject(promise,reason))},"Settle: "+(promise._label||" unknown promise"));!sealed&&error&&(sealed=!0,lib$es6$promise$$internal$$reject(promise,error))},promise)}function lib$es6$promise$$internal$$handleOwnThenable(promise,thenable){thenable._state===lib$es6$promise$$internal$$FULFILLED?lib$es6$promise$$internal$$fulfill(promise,thenable._result):thenable._state===lib$es6$promise$$internal$$REJECTED?lib$es6$promise$$internal$$reject(promise,thenable._result):lib$es6$promise$$internal$$subscribe(thenable,void 0,function(value){lib$es6$promise$$internal$$resolve(promise,value)},function(reason){lib$es6$promise$$internal$$reject(promise,reason)})}function lib$es6$promise$$internal$$handleMaybeThenable(promise,maybeThenable){if(maybeThenable.constructor===promise.constructor)lib$es6$promise$$internal$$handleOwnThenable(promise,maybeThenable);else{var then=lib$es6$promise$$internal$$getThen(maybeThenable);then===lib$es6$promise$$internal$$GET_THEN_ERROR?lib$es6$promise$$internal$$reject(promise,lib$es6$promise$$internal$$GET_THEN_ERROR.error):void 0===then?lib$es6$promise$$internal$$fulfill(promise,maybeThenable):lib$es6$promise$utils$$isFunction(then)?lib$es6$promise$$internal$$handleForeignThenable(promise,maybeThenable,then):lib$es6$promise$$internal$$fulfill(promise,maybeThenable)}}function lib$es6$promise$$internal$$resolve(promise,value){promise===value?lib$es6$promise$$internal$$reject(promise,lib$es6$promise$$internal$$selfFullfillment()):lib$es6$promise$utils$$objectOrFunction(value)?lib$es6$promise$$internal$$handleMaybeThenable(promise,value):lib$es6$promise$$internal$$fulfill(promise,value)}function lib$es6$promise$$internal$$publishRejection(promise){promise._onerror&&promise._onerror(promise._result),lib$es6$promise$$internal$$publish(promise)}function lib$es6$promise$$internal$$fulfill(promise,value){promise._state===lib$es6$promise$$internal$$PENDING&&(promise._result=value,promise._state=lib$es6$promise$$internal$$FULFILLED,0!==promise._subscribers.length&&lib$es6$promise$asap$$default(lib$es6$promise$$internal$$publish,promise))}function lib$es6$promise$$internal$$reject(promise,reason){promise._state===lib$es6$promise$$internal$$PENDING&&(promise._state=lib$es6$promise$$internal$$REJECTED,promise._result=reason,lib$es6$promise$asap$$default(lib$es6$promise$$internal$$publishRejection,promise))}function lib$es6$promise$$internal$$subscribe(parent,child,onFulfillment,onRejection){var subscribers=parent._subscribers,length=subscribers.length;parent._onerror=null,subscribers[length]=child,subscribers[length+lib$es6$promise$$internal$$FULFILLED]=onFulfillment,subscribers[length+lib$es6$promise$$internal$$REJECTED]=onRejection,0===length&&parent._state&&lib$es6$promise$asap$$default(lib$es6$promise$$internal$$publish,parent)}function lib$es6$promise$$internal$$publish(promise){var subscribers=promise._subscribers,settled=promise._state;if(0!==subscribers.length){for(var child,callback,detail=promise._result,i=0;i<subscribers.length;i+=3)child=subscribers[i],callback=subscribers[i+settled],child?lib$es6$promise$$internal$$invokeCallback(settled,child,callback,detail):callback(detail);promise._subscribers.length=0}}function lib$es6$promise$$internal$$ErrorObject(){this.error=null}function lib$es6$promise$$internal$$tryCatch(callback,detail){try{return callback(detail)}catch(e){return lib$es6$promise$$internal$$TRY_CATCH_ERROR.error=e,lib$es6$promise$$internal$$TRY_CATCH_ERROR}}function lib$es6$promise$$internal$$invokeCallback(settled,promise,callback,detail){var value,error,succeeded,failed,hasCallback=lib$es6$promise$utils$$isFunction(callback);if(hasCallback){if(value=lib$es6$promise$$internal$$tryCatch(callback,detail),value===lib$es6$promise$$internal$$TRY_CATCH_ERROR?(failed=!0,error=value.error,value=null):succeeded=!0,promise===value)return void lib$es6$promise$$internal$$reject(promise,lib$es6$promise$$internal$$cannotReturnOwn())}else value=detail,succeeded=!0;promise._state!==lib$es6$promise$$internal$$PENDING||(hasCallback&&succeeded?lib$es6$promise$$internal$$resolve(promise,value):failed?lib$es6$promise$$internal$$reject(promise,error):settled===lib$es6$promise$$internal$$FULFILLED?lib$es6$promise$$internal$$fulfill(promise,value):settled===lib$es6$promise$$internal$$REJECTED&&lib$es6$promise$$internal$$reject(promise,value))}function lib$es6$promise$$internal$$initializePromise(promise,resolver){try{resolver(function(value){lib$es6$promise$$internal$$resolve(promise,value)},function(reason){lib$es6$promise$$internal$$reject(promise,reason)})}catch(e){lib$es6$promise$$internal$$reject(promise,e)}}function lib$es6$promise$enumerator$$Enumerator(Constructor,input){var enumerator=this;enumerator._instanceConstructor=Constructor,enumerator.promise=new Constructor(lib$es6$promise$$internal$$noop),enumerator._validateInput(input)?(enumerator._input=input,enumerator.length=input.length,enumerator._remaining=input.length,enumerator._init(),0===enumerator.length?lib$es6$promise$$internal$$fulfill(enumerator.promise,enumerator._result):(enumerator.length=enumerator.length||0,enumerator._enumerate(),0===enumerator._remaining&&lib$es6$promise$$internal$$fulfill(enumerator.promise,enumerator._result))):lib$es6$promise$$internal$$reject(enumerator.promise,enumerator._validationError())}function lib$es6$promise$promise$all$$all(entries){return new lib$es6$promise$enumerator$$default(this,entries).promise}function lib$es6$promise$promise$race$$race(entries){function onFulfillment(value){lib$es6$promise$$internal$$resolve(promise,value)}function onRejection(reason){lib$es6$promise$$internal$$reject(promise,reason)}var Constructor=this,promise=new Constructor(lib$es6$promise$$internal$$noop);if(!lib$es6$promise$utils$$isArray(entries))return lib$es6$promise$$internal$$reject(promise,new TypeError("You must pass an array to race.")),promise;for(var length=entries.length,i=0;promise._state===lib$es6$promise$$internal$$PENDING&&length>i;i++)lib$es6$promise$$internal$$subscribe(Constructor.resolve(entries[i]),void 0,onFulfillment,onRejection);return promise}function lib$es6$promise$promise$resolve$$resolve(object){var Constructor=this;if(object&&"object"==typeof object&&object.constructor===Constructor)return object;var promise=new Constructor(lib$es6$promise$$internal$$noop);return lib$es6$promise$$internal$$resolve(promise,object),promise}function lib$es6$promise$promise$reject$$reject(reason){var Constructor=this,promise=new Constructor(lib$es6$promise$$internal$$noop);return lib$es6$promise$$internal$$reject(promise,reason),promise}function lib$es6$promise$promise$$needsResolver(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function lib$es6$promise$promise$$needsNew(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function lib$es6$promise$promise$$Promise(resolver){this._id=lib$es6$promise$promise$$counter++,this._state=void 0,this._result=void 0,this._subscribers=[],lib$es6$promise$$internal$$noop!==resolver&&(lib$es6$promise$utils$$isFunction(resolver)||lib$es6$promise$promise$$needsResolver(),this instanceof lib$es6$promise$promise$$Promise||lib$es6$promise$promise$$needsNew(),lib$es6$promise$$internal$$initializePromise(this,resolver))}function lib$es6$promise$polyfill$$polyfill(){var local;if("undefined"!=typeof global)local=global;else if("undefined"!=typeof self)local=self;else try{local=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var P=local.Promise;(!P||"[object Promise]"!==Object.prototype.toString.call(P.resolve())||P.cast)&&(local.Promise=lib$es6$promise$promise$$default)}var lib$es6$promise$utils$$_isArray;lib$es6$promise$utils$$_isArray=Array.isArray?Array.isArray:function(x){return"[object Array]"===Object.prototype.toString.call(x)};var lib$es6$promise$asap$$vertxNext,lib$es6$promise$asap$$scheduleFlush,lib$es6$promise$utils$$isArray=lib$es6$promise$utils$$_isArray,lib$es6$promise$asap$$len=0,lib$es6$promise$asap$$default=({}.toString,lib$es6$promise$asap$$asap),lib$es6$promise$asap$$browserWindow="undefined"!=typeof window?window:void 0,lib$es6$promise$asap$$browserGlobal=lib$es6$promise$asap$$browserWindow||{},lib$es6$promise$asap$$BrowserMutationObserver=lib$es6$promise$asap$$browserGlobal.MutationObserver||lib$es6$promise$asap$$browserGlobal.WebKitMutationObserver,lib$es6$promise$asap$$isNode="undefined"!=typeof process&&"[object process]"==={}.toString.call(process),lib$es6$promise$asap$$isWorker="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,lib$es6$promise$asap$$queue=new Array(1e3);lib$es6$promise$asap$$scheduleFlush=lib$es6$promise$asap$$isNode?lib$es6$promise$asap$$useNextTick():lib$es6$promise$asap$$BrowserMutationObserver?lib$es6$promise$asap$$useMutationObserver():lib$es6$promise$asap$$isWorker?lib$es6$promise$asap$$useMessageChannel():void 0===lib$es6$promise$asap$$browserWindow&&"function"==typeof require?lib$es6$promise$asap$$attemptVertex():lib$es6$promise$asap$$useSetTimeout();var lib$es6$promise$$internal$$PENDING=void 0,lib$es6$promise$$internal$$FULFILLED=1,lib$es6$promise$$internal$$REJECTED=2,lib$es6$promise$$internal$$GET_THEN_ERROR=new lib$es6$promise$$internal$$ErrorObject,lib$es6$promise$$internal$$TRY_CATCH_ERROR=new lib$es6$promise$$internal$$ErrorObject;lib$es6$promise$enumerator$$Enumerator.prototype._validateInput=function(input){return lib$es6$promise$utils$$isArray(input)},lib$es6$promise$enumerator$$Enumerator.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},lib$es6$promise$enumerator$$Enumerator.prototype._init=function(){this._result=new Array(this.length)};var lib$es6$promise$enumerator$$default=lib$es6$promise$enumerator$$Enumerator;lib$es6$promise$enumerator$$Enumerator.prototype._enumerate=function(){for(var enumerator=this,length=enumerator.length,promise=enumerator.promise,input=enumerator._input,i=0;promise._state===lib$es6$promise$$internal$$PENDING&&length>i;i++)enumerator._eachEntry(input[i],i)},lib$es6$promise$enumerator$$Enumerator.prototype._eachEntry=function(entry,i){var enumerator=this,c=enumerator._instanceConstructor;lib$es6$promise$utils$$isMaybeThenable(entry)?entry.constructor===c&&entry._state!==lib$es6$promise$$internal$$PENDING?(entry._onerror=null,enumerator._settledAt(entry._state,i,entry._result)):enumerator._willSettleAt(c.resolve(entry),i):(enumerator._remaining--,enumerator._result[i]=entry)},lib$es6$promise$enumerator$$Enumerator.prototype._settledAt=function(state,i,value){var enumerator=this,promise=enumerator.promise;promise._state===lib$es6$promise$$internal$$PENDING&&(enumerator._remaining--,state===lib$es6$promise$$internal$$REJECTED?lib$es6$promise$$internal$$reject(promise,value):enumerator._result[i]=value),0===enumerator._remaining&&lib$es6$promise$$internal$$fulfill(promise,enumerator._result)},lib$es6$promise$enumerator$$Enumerator.prototype._willSettleAt=function(promise,i){var enumerator=this;lib$es6$promise$$internal$$subscribe(promise,void 0,function(value){enumerator._settledAt(lib$es6$promise$$internal$$FULFILLED,i,value)},function(reason){enumerator._settledAt(lib$es6$promise$$internal$$REJECTED,i,reason)})};var lib$es6$promise$promise$all$$default=lib$es6$promise$promise$all$$all,lib$es6$promise$promise$race$$default=lib$es6$promise$promise$race$$race,lib$es6$promise$promise$resolve$$default=lib$es6$promise$promise$resolve$$resolve,lib$es6$promise$promise$reject$$default=lib$es6$promise$promise$reject$$reject,lib$es6$promise$promise$$counter=0,lib$es6$promise$promise$$default=lib$es6$promise$promise$$Promise;lib$es6$promise$promise$$Promise.all=lib$es6$promise$promise$all$$default,lib$es6$promise$promise$$Promise.race=lib$es6$promise$promise$race$$default,lib$es6$promise$promise$$Promise.resolve=lib$es6$promise$promise$resolve$$default,lib$es6$promise$promise$$Promise.reject=lib$es6$promise$promise$reject$$default,lib$es6$promise$promise$$Promise.prototype={constructor:lib$es6$promise$promise$$Promise,then:function(onFulfillment,onRejection){var parent=this,state=parent._state;if(state===lib$es6$promise$$internal$$FULFILLED&&!onFulfillment||state===lib$es6$promise$$internal$$REJECTED&&!onRejection)return this;var child=new this.constructor(lib$es6$promise$$internal$$noop),result=parent._result;if(state){var callback=arguments[state-1];lib$es6$promise$asap$$default(function(){lib$es6$promise$$internal$$invokeCallback(state,child,callback,result)})}else lib$es6$promise$$internal$$subscribe(parent,child,onFulfillment,onRejection);return child},"catch":function(onRejection){return this.then(null,onRejection)}};var lib$es6$promise$polyfill$$default=lib$es6$promise$polyfill$$polyfill,lib$es6$promise$umd$$ES6Promise={Promise:lib$es6$promise$promise$$default,polyfill:lib$es6$promise$polyfill$$default};"function"==typeof define&&define.amd?define(function(){return lib$es6$promise$umd$$ES6Promise}):"undefined"!=typeof module&&module.exports?module.exports=lib$es6$promise$umd$$ES6Promise:"undefined"!=typeof this&&(this.ES6Promise=lib$es6$promise$umd$$ES6Promise),lib$es6$promise$polyfill$$default()}).call(this)}).call(this,require("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:2}],4:[function(require,module,exports){var Answer,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Answer=function(superClass){function Answer(){return Answer.__super__.constructor.apply(this,arguments)}return extend(Answer,superClass),module.exports=Answer,Answer.path="/channel/answers",Answer.association("question",require("./question")),Answer}(require("../resource"))},{"../resource":26,"./question":18}],5:[function(require,module,exports){var Booking,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Booking=function(superClass){function Booking(){return Booking.__super__.constructor.apply(this,arguments)}return extend(Booking,superClass),module.exports=Booking,Booking.path="/channel/bookings",Booking.types({ticket:require("./booking/ticket"),voucher:require("./booking/voucher")}),Booking.collection("answers",require("./answer")),Booking.collection("purchases",require("./purchase")),Booking}(require("../resource"))},{"../resource":26,"./answer":4,"./booking/ticket":6,"./booking/voucher":7,"./purchase":17}],6:[function(require,module,exports){var TicketBooking,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;TicketBooking=function(superClass){function TicketBooking(){return TicketBooking.__super__.constructor.apply(this,arguments)}return extend(TicketBooking,superClass),module.exports=TicketBooking,TicketBooking.path="/channel/bookings",TicketBooking.collection("tickets",require("./ticket")),TicketBooking}(require("../booking"))},{"../booking":5,"./ticket":6}],7:[function(require,module,exports){var VoucherBooking,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;VoucherBooking=function(superClass){function VoucherBooking(){return VoucherBooking.__super__.constructor.apply(this,arguments)}return extend(VoucherBooking,superClass),module.exports=VoucherBooking,VoucherBooking.path="/channel/bookings",VoucherBooking.collection("vouchers",require("../voucher")),VoucherBooking}(require("../booking"))},{"../booking":5,"../voucher":21}],8:[function(require,module,exports){var Channel,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Channel=function(superClass){function Channel(){return Channel.__super__.constructor.apply(this,arguments)}return extend(Channel,superClass),module.exports=Channel,Channel.path="/channel",Channel.singleton=!0,Channel.collection("vouchers",require("./voucher")),Channel.collection("coupons",require("./coupon")),Channel.collection("tiers",require("./tier")),Channel.collection("variants",require("./variant")),Channel.collection("extras",require("./extra")),Channel.collection("questions",require("./question")),Channel.collection("bookings",require("./booking")),Channel.collection("orders",require("./order")),Channel.collection("options",require("./option")),Channel.association("product",require("./product")),Channel.login=function(token){return TicketingHub.endpoint.base(this.path,token).get().then(function(_this){return function(response){return _this.load(TicketingHub.endpoint.join(_this.path,token),response.body)}}(this))},Channel}(require("../resource"))},{"../resource":26,"./booking":5,"./coupon":9,"./extra":10,"./option":11,"./order":12,"./product":16,"./question":18,"./tier":19,"./variant":20,"./voucher":21}],9:[function(require,module,exports){var Coupon,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Coupon=function(superClass){function Coupon(){return Coupon.__super__.constructor.apply(this,arguments)}return extend(Coupon,superClass),module.exports=Coupon,Coupon.path="/channel/coupons",Coupon}(require("../resource"))},{"../resource":26}],10:[function(require,module,exports){var Extra,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Extra=function(superClass){function Extra(){return Extra.__super__.constructor.apply(this,arguments)}return extend(Extra,superClass),module.exports=Extra,Extra.path="/channel/extras",Extra}(require("../resource"))},{"../resource":26}],11:[function(require,module,exports){var Option,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Option=function(superClass){function Option(){return Option.__super__.constructor.apply(this,arguments)}return extend(Option,superClass),module.exports=Option,Option.path="/channel/options",Option}(require("../resource"))},{"../resource":26}],12:[function(require,module,exports){var Endpoint,Order,Promise,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Promise=require("es6-promise").Promise,Endpoint=require("../endpoint"),Order=function(superClass){function Order(){return Order.__super__.constructor.apply(this,arguments)}return extend(Order,superClass),module.exports=Order,Order.path="/channel/orders",Order.collection("payments",require("./payment")),Order.collection("bookings",require("./booking")),Order.prototype.confirm=function(){return this._endpoint.post("confirm").then(function(_this){return function(response){return _this._setup(response.body)}}(this))["catch"](TicketingHub.RequestError,function(_this){return function(error){throw 422===error.response.status?new TicketingHub.ValidationError(_this.klass.load(_this.endpoint,error.response.body)):error}}(this))},Order}(require("../resource"))},{"../endpoint":23,"../resource":26,"./booking":5,"./payment":13,"es6-promise":3}],13:[function(require,module,exports){var Payment,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Payment=function(superClass){function Payment(){return Payment.__super__.constructor.apply(this,arguments)}return extend(Payment,superClass),module.exports=Payment,Payment.path="/channel/payments",Payment.types({credit:require("./payment/credit"),stripe:require("./payment/stripe")}),Payment}(require("../resource"))},{"../resource":26,"./payment/credit":14,"./payment/stripe":15}],14:[function(require,module,exports){var CreditPayment,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;CreditPayment=function(superClass){function CreditPayment(){return CreditPayment.__super__.constructor.apply(this,arguments)}return extend(CreditPayment,superClass),module.exports=CreditPayment,CreditPayment.path="/channel/payments",CreditPayment}(require("../payment"))},{"../payment":13}],15:[function(require,module,exports){var StripePayment,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;StripePayment=function(superClass){function StripePayment(){return StripePayment.__super__.constructor.apply(this,arguments);
}return extend(StripePayment,superClass),module.exports=StripePayment,StripePayment.path="/channel/payments",StripePayment}(require("../payment"))},{"../payment":13}],16:[function(require,module,exports){var Product,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Product=function(superClass){function Product(){return Product.__super__.constructor.apply(this,arguments)}return extend(Product,superClass),module.exports=Product,Product.path="/channel/product",Product.singleton=!0,Product}(require("../resource"))},{"../resource":26}],17:[function(require,module,exports){var Purchase,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Purchase=function(superClass){function Purchase(){return Purchase.__super__.constructor.apply(this,arguments)}return extend(Purchase,superClass),module.exports=Purchase,Purchase.path="/channel/purchases",Purchase.association("extra",require("./extra")),Purchase}(require("../resource"))},{"../resource":26,"./extra":10}],18:[function(require,module,exports){var Question,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Question=function(superClass){function Question(){return Question.__super__.constructor.apply(this,arguments)}return extend(Question,superClass),module.exports=Question,Question.path="/channel/questions",Question}(require("../resource"))},{"../resource":26}],19:[function(require,module,exports){var Tier,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Tier=function(superClass){function Tier(){return Tier.__super__.constructor.apply(this,arguments)}return extend(Tier,superClass),module.exports=Tier,Tier.path="/channel/tiers",Tier}(require("../resource"))},{"../resource":26}],20:[function(require,module,exports){var Variant,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Variant=function(superClass){function Variant(){return Variant.__super__.constructor.apply(this,arguments)}return extend(Variant,superClass),module.exports=Variant,Variant.path="/channel/variants",Variant}(require("../resource"))},{"../resource":26}],21:[function(require,module,exports){var Voucher,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;Voucher=function(superClass){function Voucher(){return Voucher.__super__.constructor.apply(this,arguments)}return extend(Voucher,superClass),module.exports=Voucher,Voucher.path="/channel/vouchers",Voucher}(require("../resource"))},{"../resource":26}],22:[function(require,module,exports){var Collection,EventEmitter,Promise,extend,extend1=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty,slice=[].slice;extend=require("./util").extend,Promise=require("es6-promise").Promise,EventEmitter=require("events").EventEmitter,Collection=function(superClass){function Collection(endpoint,klass,params){this.endpoint=endpoint,this.klass=klass,Collection.__super__.constructor.call(this),this._params=extend({},params||{}),this._limit=this._params.limit||MAX_LIMIT,this._offset=this._params.offset||0}var MAX_LIMIT,fn,i,len,method,ref;for(extend1(Collection,superClass),MAX_LIMIT=25,Collection.prototype.each=function(callback){var dispatch,fetch,index;return index=0,dispatch=function(_this){return function(cache){var i,len,loaded,value;for(i=0,len=cache.length;len>i;i++)if(value=cache[i],loaded=_this.klass.load(_this.endpoint,value),callback(loaded,index++,_this._count)===!1)return!1;return!0}}(this),fetch=function(_this){return function(offset){return offset===_this._offset&&_this._cache&&dispatch(_this._cache)===!1||_this._count&&_this._cache.length>=_this._count?void 0:_this.endpoint.get(_this.params({offset:offset})).then(function(response){return _this._count=parseInt(response.headers["x-total-count"]),dispatch(response.body)&&206===response.status?fetch(offset+MAX_LIMIT):void 0})}}(this),fetch(this._offset),this},Collection.prototype.first=function(count){return null==count&&(count=1),new Promise(function(_this){return function(resolve,reject){var values;return values=[],_this.limit(Math.min(MAX_LIMIT,count)).each(function(value,index){return index===count-1?(resolve(values),!1):void 0})}}(this))},Collection.prototype.all=function(){return this.reload().then(function(_this){return function(){return new Promise(function(resolve,reject){var values;return values=[],_this.each(function(value,index,count){return values.push(value),index===count-1?resolve(values):void 0}),0===_this._count?resolve(values):void 0})}}(this))},Collection.prototype.scope=function(path){return new Collection(this.endpoint.join(path),this.klass,this._params)},Collection.prototype.limit=function(value){return null==value?this._limit:new Collection(this.endpoint,this.klass,this.params({limit:parseInt(value)}))},Collection.prototype.offset=function(value){return null==value?this._offset:new Collection(this.endpoint,this.klass,this.params({offset:parseInt(value)}))},Collection.prototype.filter=function(filters){return new Collection(this.endpoint,this.klass,this.params({filters:filters}))},Collection.prototype.count=function(){return new Promise(function(_this){return function(resolve,reject){return _this._count?resolve(_this._count):_this.reload().then(function(){return resolve(_this._count)})}}(this))},ref=["get","post","patch","delete"],fn=function(method){return Collection.prototype[method]=function(){var args,ref1;return args=1<=arguments.length?slice.call(arguments,0):[],(ref1=this.endpoint)[method].apply(ref1,args).then(function(response){return response.body})}},i=0,len=ref.length;len>i;i++)method=ref[i],fn(method);return Collection.prototype.create=function(attributes){return new Promise(function(_this){return function(resolve,reject){return _this.endpoint.post(attributes).then(function(response){return resolve(_this.klass.load(_this.endpoint,response.body))})["catch"](TicketingHub.RequestError,function(error){return reject(422===error.response.status?new TicketingHub.ValidationError(_this.klass.load(_this.endpoint,error.response.body)):error)})["catch"](function(error){return reject(error)})}}(this))},Collection.prototype.reload=function(params){return this.endpoint.get(this.params(params)).then(function(_this){return function(response){return _this._cache=response.body,_this._count=206===status?parseInt(response.headers["x-total-count"]):_this._cache.length,_this}}(this))},Collection.prototype.params=function(params){return extend(extend({},this._params),params||{})},Collection}(EventEmitter),module.exports=Collection},{"./util":28,"es6-promise":3,events:1}],23:[function(require,module,exports){(function(global){var Endpoint,Promise,Response,extend,util;extend=require("./util").extend,Promise=require("es6-promise").Promise,Response=require("./response"),util=require("./util"),Endpoint=function(){function Endpoint(origin,path1,auth1){this.origin=origin,this.path=null!=path1?path1:"",this.auth=null!=auth1?auth1:"",this.url=""+this.origin+this.path}var RETRIES,TIMEOUT,fn,i,len,method,ref;for(TIMEOUT=3e4,RETRIES=3,Endpoint.prototype.base=function(path,auth){return null==auth&&(auth=this.auth),new Endpoint(this.origin,path,auth)},Endpoint.prototype.join=function(path,auth){return null==auth&&(auth=this.auth),new Endpoint(this.origin,this.path+"/"+path,auth)},ref=["get","post","patch","delete"],fn=function(method){return Endpoint.prototype[method]=function(path,params){var ref1;return"string"!=typeof path&&(ref1=[params,path],path=ref1[0],params=ref1[1]),this.request(method,path,params)}},i=0,len=ref.length;len>i;i++)method=ref[i],fn(method);return Endpoint.prototype.request=function(method,path,params){var id;return null==path&&(path=""),id=util.generateUUID(),new Promise(function(_this){return function(resolve,reject){var agent,callback,handle,json_params,options,parts,query,req,script,target,timeout,xhr;return parts=util.parseURL("/"===path[0]?_this.origin+"/"+path:_this.url+"/"+path),json_params=encodeURIComponent(JSON.stringify(params||{})),query="?_id="+id+"&_json="+json_params+"&_method="+method.toLowerCase(),handle=function(response){var ref1,ref2;return 400<=(ref1=response.status)&&500>ref1?reject(new TicketingHub.RequestError(response)):500<=(ref2=response.status)&&600>ref2?reject(new TicketingHub.ServerError(response)):resolve(response)},"XMLHttpRequest"in global?(xhr=new XMLHttpRequest,"withCredentials"in xhr&&"timeout"in xhr?(xhr.timeout=TIMEOUT,xhr.withCredentials=!0,xhr.open("GET",""+parts.href+query,!0),xhr.setRequestHeader("Authorization","Basic "+btoa(_this.auth+":")),xhr.onload=function(){var body,headers;return body=xhr.responseText,headers=util.parseResponseHeaders(xhr.getAllResponseHeaders()),handle(new Response(xhr.status,body,headers))},xhr.onerror=function(){return reject(new TicketingHub.ConnectionError("Request network error."))},xhr.ontimeout=function(){return reject(new TicketingHub.ConnectionError("Request timed out."))},xhr.send()):(global._th_jsonp_counter||(global._th_jsonp_counter=0),callback="_th_jsonp_callback"+(id=global._th_jsonp_counter++),script=document.createElement("script"),script.type="text/javascript",script.async=!0,script.src=""+parts.href+query+"&_token="+_this.auth+"&_callback="+callback+"&_="+(Number(new Date)+("."+id)),timeout=setTimeout(function(){return script.parentNode.removeChild(script),global[callback]=function(){},reject(new TicketingHub.ConnectionError("Request timed out."))},TIMEOUT),global[callback]=function(body,status,headers){return clearTimeout(timeout),global[callback]=function(){},script.parentNode.removeChild(script),handle(new Response(status,body,headers))},target=document.getElementsByTagName("script")[0]||document.head,target.parentNode.insertBefore(script,target))):(options={method:"GET",scheme:parts.protocol.slice(0,-1),host:parts.hostname,port:parts.port,auth:_this.auth+":",path:""+parts.path+query},agent=require(parts.protocol.slice(0,-1)),req=agent.request(options,function(res){var data;return data="",res.on("data",function(chunk){return data+=chunk}),res.on("end",function(){return 0!==res.statusCode?handle(new Response(res.statusCode,data,res.headers)):void 0})}),req.setTimeout(TIMEOUT,function(){return reject(new TicketingHub.ConnectionError("Request timed out."))}),req.on("error",function(error){return reject(new TicketingHub.ConnectionError(error.message))}),req.end())}}(this))},Endpoint}(),module.exports=Endpoint}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./response":27,"./util":28,"es6-promise":3}],24:[function(require,module,exports){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;exports.RequestError=function(superClass){function RequestError(response){this.response=response,this.name="RequestError",Error.captureStackTrace(this,RequestError)}return extend(RequestError,superClass),RequestError}(Error),exports.ServerError=function(superClass){function ServerError(response){this.response=response,this.name="ServerError",Error.captureStackTrace(this,ServerError)}return extend(ServerError,superClass),ServerError}(Error),exports.ConnectionError=function(superClass){function ConnectionError(message){this.message=message,this.name="ConnectionError",Error.captureStackTrace(this,ConnectionError)}return extend(ConnectionError,superClass),ConnectionError}(Error),exports.ValidationError=function(superClass){function ValidationError(resource){this.resource=resource,this.name="ValidationError",this.message="Resource is invalid.",Error.captureStackTrace(this,ValidationError)}return extend(ValidationError,superClass),ValidationError}(Error)},{}],25:[function(require,module,exports){(function(global){global.JSON||(global.JSON={parse:function(sJSON){return eval("("+sJSON+")")},stringify:function(){var escFunc,escMap,escRE,isArray,toString;return toString=Object.prototype.toString,isArray=Array.isArray||function(a){return"[object Array]"===toString.call(a)},escMap={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"},escFunc=function(m){return escMap[m]||"\\u"+(m.charCodeAt(0)+65536).toString(16).substr(1)},escRE=/[\\"\u0000-\u001F\u2028\u2029]/g,function(value){var i,k,res,tmp;if(null===value||"undefined"==typeof value)return"null";if("number"==typeof value)return isFinite(value)?value.toString():"null";if("boolean"==typeof value)return value.toString();if("object"==typeof value){if("function"==typeof value.toJSON)return JSON.stringify(value.toJSON());if(isArray(value)){for(res="[",i=0;i<value.length;)res+=(i?", ":"")+JSON.stringify(value[i]),i++;return res+"]"}if("[object Object]"===toString.call(value)){tmp=[];for(k in value)value.hasOwnProperty(k)&&tmp.push(JSON.stringify(k)+": "+JSON.stringify(value[k]));return"{"+tmp.join(", ")+"}"}}return'"'+value.toString().replace(escRE,escFunc)+'"'}}()}),"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],26:[function(require,module,exports){var Collection,EventEmitter,Resource,extend,util,extend1=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty,slice=[].slice;extend=require("./util").extend,util=require("./util"),Collection=require("./collection"),EventEmitter=require("events").EventEmitter,Resource=function(superClass){function Resource(_endpoint,attributes){var listening;this._endpoint=_endpoint,Resource.__super__.constructor.call(this),this._setup(attributes),listening=!1,this.updated_at&&(this.on("removeListener",function(_this){return function(event){return 0===EventEmitter.listenerCount(_this,"change")?listening=!1:void 0}}(this)),this.on("newListener",function(_this){return function(event){var retry,updated_at;if(!listening)return"change"===event?(listening=!0,updated_at=_this.updated_at,retry=function(){return listening?_this._reload().then(function(){return updated_at!==_this.updated_at&&(updated_at=_this.updated_at,_this.emit("change",_this)),setTimeout(retry,util.timeDecay(util.parseISO8601DateTime(_this.updated_at)))}):void 0},setTimeout(retry,util.timeDecay(util.parseISO8601DateTime(_this.updated_at)))):void 0}}(this)))}return extend1(Resource,superClass),Resource.collection=function(key,klass){return this.prototype[key]=function(){var args,ref;return args=1<=arguments.length?slice.call(arguments,0):[],"string"==typeof args[0]?(ref=this._endpoint).get.apply(ref,[klass.path+"/"+args[0]].concat(slice.call(args.slice(1)))).then(function(_this){return function(response){return klass.load(_this._endpoint,response.body)}}(this)):new Collection(this._endpoint.join(key),klass,args[0])}},Resource.association=function(key,klass){return this.prototype[key+"="]=function(attributes){return this[key]=klass.load(this._endpoint,attributes)}},Resource.types=function(hash){return this._types=hash},Resource.load=function(endpoint,attributes){var callback,path,ref,ref1,type;return"function"==typeof attributes&&(ref=[attributes,callback],callback=ref[0],attributes=ref[1]),type=(null!=(ref1=this._types)?ref1[attributes.type]:void 0)||this,path=this.singleton?type.path:type.path+"/"+attributes.id,endpoint=endpoint.base(path),new type(endpoint,attributes)},Resource.prototype["delete"]=function(){return this._endpoint["delete"](attributes).then(function(_this){return function(response){return _this._setup(response.body)}}(this))},Resource.prototype.update=function(attributes){return new Promise(function(_this){return function(resolve,reject){return _this._endpoint.patch(attributes).then(function(response){return resolve(_this._setup(response.body))})["catch"](TicketingHub.RequestError,function(error){return reject(422===error.response.status?new TicketingHub.ValidationError(_this.constructor.load(_this._endpoint,error.response.body)):error)})["catch"](function(error){return reject(error)})}}(this))},Resource.prototype._reload=function(){return this._endpoint.get().then(function(_this){return function(response){return _this._setup(response.body)}}(this))},Resource.prototype._setup=function(params){var key,value;for(key in params)value=params[key],key+"="in this?this[key+"="](value):this[key]=value;return this},Resource}(EventEmitter),module.exports=Resource},{"./collection":22,"./util":28,events:1}],27:[function(require,module,exports){var Response;Response=function(){function Response(status,body,headers){var key,value;this.status=status,null==body&&(body=""),null==headers&&(headers={}),this.headers={};for(key in headers)value=headers[key],this.headers[key.toLowerCase()]=value;/json/.test(this.headers["content-type"])&&(body=JSON.parse(body)),this.body=body}return Response}(),module.exports=Response},{}],28:[function(require,module,exports){(function(global){exports.parseISO8601DateTime=function(s){var a,d,i,ms,offset,re;if(re=/(\d{4})-(\d\d)-(\d\d)T(\d\d):(\d\d):(\d\d)(\.\d+)?(Z|([+-])(\d\d):(\d\d))/,d=s.match(re),!d)throw"Couldn't parse ISO 8601 date string '"+s+"'";a=[1,2,3,4,5,6,10,11];for(i in a)d[a[i]]=parseInt(d[a[i]],10);return d[7]=parseFloat(d[7]),ms=Date.UTC(d[1],d[2]-1,d[3],d[4],d[5],d[6]),d[7]>0&&(ms+=Math.round(1e3*d[7])),"Z"!==d[8]&&d[10]&&(offset=60*d[10]*60*1e3,d[11]&&(offset+=60*d[11]*1e3),"+"===d[9]?ms-=offset:ms+=offset),new Date(ms)},exports.parseURL=function(str){var a,url;return global.window?(a=document.createElement("a"),a.href=str,{protocol:a.protocol,hostname:a.hostname,port:a.port,pathname:a.pathname,href:a.href}):(url="url",require(url).parse(str))},exports.extend=function(a,b){var key,value;for(key in b)value=b[key],a[key]=value;return a},exports.parseResponseHeaders=function(headerStr){var headerPair,headerPairs,headers,i,index,key,val;if(headers={},!headerStr)return headers;for(headerPairs=headerStr.split("\r\n"),i=0;i<headerPairs.length;)headerPair=headerPairs[i],index=headerPair.indexOf(": "),index>0&&(key=headerPair.substring(0,index),val=headerPair.substring(index+2),headers[key]=val),i++;return headers},exports.generateUUID=function(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(a){return(a^16*Math.random()>>a/4).toString(16)})},exports.timeDecay=function(_this){return function(date){var seconds;return seconds=(Number(new Date)-Number(date))/1e3,1e3*Math.log(1+seconds,Math.E)}}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],29:[function(require,module,exports){(function(global){var ConnectionError,Endpoint,RequestError,ServerError,TicketingHub,ValidationError,ref;require("./polyfill"),Endpoint=require("./endpoint"),ref=require("./errors"),RequestError=ref.RequestError,ServerError=ref.ServerError,ConnectionError=ref.ConnectionError,ValidationError=ref.ValidationError,TicketingHub=function(){function TicketingHub(){}return TicketingHub.endpoint=new Endpoint("http://localhost:5000"),TicketingHub.Channel=require("./channel/channel"),TicketingHub.RequestError=RequestError,TicketingHub.ServerError=ServerError,TicketingHub.ConnectionError=ConnectionError,TicketingHub.ValidationError=ValidationError,TicketingHub}(),"undefined"!=typeof global.window?global.window.TicketingHub=TicketingHub:module.exports={TicketingHub:TicketingHub}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./channel/channel":8,"./endpoint":23,"./errors":24,"./polyfill":25}]},{},[29]);
